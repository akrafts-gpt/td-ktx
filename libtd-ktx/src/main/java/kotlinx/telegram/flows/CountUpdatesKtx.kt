//
// NOTE: THIS FILE IS AUTO-GENERATED by the "TdApiKtxGenerator".kt
// See: https://github.com/tdlibx/td-ktx-generator/
//
package kotlinx.telegram.flows

import kotlin.Int
import kotlin.Long
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.mapNotNull
import kotlinx.telegram.core.TelegramFlow
import org.drinkless.td.libcore.telegram.TdApi
import org.drinkless.td.libcore.telegram.TdApi.StarAmount
import org.drinkless.td.libcore.telegram.TdApi.UpdateTopicMessageCount
import org.drinkless.td.libcore.telegram.TdApi.UpdateUnreadMessageCount

/**
 * emits topicCount [Int] if number of Saved Messages topics has changed.
 */
fun TelegramFlow.savedMessagesTopicCountFlow(): Flow<Int> =
    this.getUpdatesFlowOfType<TdApi.UpdateSavedMessagesTopicCount>()
    .mapNotNull { it.topicCount }

/**
 * emits [UpdateTopicMessageCount] if number of messages in a topic has changed; for Saved Messages
 * and channel direct messages chat topics only.
 */
fun TelegramFlow.topicMessageCountFlow(): Flow<UpdateTopicMessageCount> =
    this.getUpdatesFlowOfType()

/**
 * emits [UpdateUnreadMessageCount] if number of unread messages in a chat list has changed. This
 * update is sent only if the message database is used.
 */
fun TelegramFlow.unreadMessageCountFlow(): Flow<UpdateUnreadMessageCount> =
    this.getUpdatesFlowOfType()

/**
 * emits [StarAmount] if the number of Telegram Stars owned by the current user has changed.
 */
fun TelegramFlow.ownedStarCountFlow(): Flow<StarAmount> =
    this.getUpdatesFlowOfType<TdApi.UpdateOwnedStarCount>()
    .mapNotNull { it.starAmount }

/**
 * emits tonAmount [Long] if the number of Toncoins owned by the current user has changed.
 */
fun TelegramFlow.ownedTonCountFlow(): Flow<Long> =
    this.getUpdatesFlowOfType<TdApi.UpdateOwnedTonCount>()
    .mapNotNull { it.tonAmount }
